FROM ubuntu:20.04

RUN apt update
RUN apt install -y curl wget python3 python3-pip
COPY internal_controller/ /usr/src/app/internal_controller/
COPY worker_manager/ /usr/src/app/worker_manager/
COPY internal_controller_setup.py /usr/src/app/internal_controller_setup.py
COPY setup.py /usr/src/app/setup.py
COPY internal_controller/startup.rc.local /etc/rc.local
RUN chmod +x /etc/rc.local
RUN cd /usr/src/app && python3 internal_controller_setup.py install
RUN pip3 install websockets pydantic python-socketio uvicorn websocket-client aiohttp
